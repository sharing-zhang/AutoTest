# AutoTest 项目学习指南

## 🎯 学习目标

通过本指南，你将能够：
1. 理解项目的整体架构和设计思路
2. 掌握核心概念和技术栈
3. 学会如何阅读和修改代码
4. 具备独立开发和调试的能力

## 📚 学习路径（建议按顺序学习）

### 第一阶段：基础概念理解（1-2天）

#### 1.1 项目概述
- **目标**：了解项目是做什么的
- **重点**：理解"自动化测试平台"的核心价值
- **学习内容**：
  - 阅读 `Readme.md` 了解项目背景
  - 查看 `doc/` 目录下的文档
  - 理解"脚本执行"、"任务管理"等核心概念

#### 1.2 技术栈梳理
- **目标**：了解项目使用的技术
- **重点**：理解各技术的作用和关系
- **学习内容**：
  ```
  前端：Vue 3 + TypeScript + Element Plus
  后端：Django + Django REST Framework
  任务队列：Celery + Redis
  数据库：MySQL/PostgreSQL
  部署：Docker
  ```

#### 1.3 项目结构理解
- **目标**：理解代码组织结构
- **重点**：知道每个目录的作用
- **学习内容**：
  ```
  web/          - 前端Vue项目
  server/       - 后端Django项目
  docker/       - Docker部署配置
  doc/          - 项目文档
  ```

### 第二阶段：核心功能理解（3-5天）

#### 2.1 脚本执行系统
- **目标**：理解脚本是如何被执行的
- **重点**：掌握两种脚本执行方式
- **学习内容**：
  - 传统脚本：`server/myapp/views/celery_views.py` 的 `execute_python_script`
  - 动态脚本：`server/myapp/views/celery_views.py` 的 `execute_dynamic_script_task`
  - 执行引擎：`run_script` 函数

#### 2.2 前端脚本管理
- **目标**：理解前端如何管理脚本
- **重点**：掌握脚本按钮的生成和执行流程
- **学习内容**：
  - `web/src/composables/useScriptManager.ts` - 脚本管理核心
  - `web/src/components/ScriptManagerLayout.vue` - 脚本布局组件
  - `web/src/components/ScriptButtons.vue` - 脚本按钮组件

#### 2.3 数据库模型
- **目标**：理解数据存储结构
- **重点**：掌握核心数据模型
- **学习内容**：
  - `server/myapp/models.py` 中的核心模型：
    - `Script` - 脚本配置
    - `TaskExecution` - 任务执行记录
    - `PageScriptConfig` - 页面脚本配置

### 第三阶段：深入理解（5-7天）

#### 3.1 Celery任务系统
- **目标**：理解异步任务处理
- **重点**：掌握任务队列的工作原理
- **学习内容**：
  - `server/celery_app/celery.py` - Celery配置
  - 任务执行流程：前端 → API → Celery → subprocess
  - Redis作为消息代理的作用

#### 3.2 动态脚本系统
- **目标**：理解动态脚本的完整流程
- **重点**：掌握参数验证和配置管理
- **学习内容**：
  - `server/myapp/management/commands/script_config_manager.py` - 配置管理器
  - `server/myapp/management/commands/script_configs.json` - 脚本配置
  - 参数验证流程

#### 3.3 前端页面创建
- **目标**：理解动态页面生成
- **重点**：掌握页面创建和同步机制
- **学习内容**：
  - `server/myapp/views/page_creator.py` - 页面创建API
  - `server/myapp/management/commands/sync_frontend_pages.py` - 页面同步

### 第四阶段：实践应用（7-10天）

#### 4.1 添加新脚本
- **目标**：学会添加新的可执行脚本
- **实践内容**：
  - 在 `server/celery_app/` 创建新脚本
  - 在 `script_configs.json` 添加配置
  - 在页面添加脚本按钮

#### 4.2 修改现有功能
- **目标**：学会修改和优化现有功能
- **实践内容**：
  - 修改脚本参数配置
  - 调整前端界面
  - 优化执行流程

#### 4.3 调试和排错
- **目标**：学会调试和解决问题
- **实践内容**：
  - 使用日志系统调试
  - 分析错误信息
  - 修复常见问题

## 🔍 学习技巧

### 1. 从简单到复杂
- 先理解基础概念，再深入细节
- 先看文档，再看代码
- 先理解流程，再理解实现

### 2. 动手实践
- 每学一个概念，都要动手验证
- 修改代码，观察变化
- 遇到问题，主动调试

### 3. 记录笔记
- 记录重要概念和流程
- 记录遇到的问题和解决方案
- 记录代码的关键部分

### 4. 提问和讨论
- 遇到不懂的地方，及时提问
- 与团队成员讨论技术问题
- 分享学习心得

## 📖 推荐学习顺序

### 第1天：项目概览
1. 阅读 `Readme.md`
2. 浏览 `doc/` 目录
3. 理解项目结构
4. 运行项目，体验功能

### 第2天：技术栈理解
1. 学习Vue 3基础
2. 学习Django基础
3. 了解Celery概念
4. 理解Docker部署

### 第3天：核心功能
1. 理解脚本执行流程
2. 学习前端脚本管理
3. 了解数据库模型
4. 实践脚本执行

### 第4天：深入理解
1. 学习Celery任务系统
2. 理解动态脚本系统
3. 学习前端页面创建
4. 实践动态脚本

### 第5天：实践应用
1. 添加新脚本
2. 修改现有功能
3. 调试和排错
4. 总结学习成果

## 🚀 快速上手建议

### 1. 先运行项目
```bash
# 启动后端
cd server
python manage.py runserver

# 启动前端
cd web
npm run dev

# 启动Celery
python manage.py celery_worker
```

### 2. 体验核心功能
- 访问前端页面
- 点击脚本按钮
- 观察执行结果
- 查看日志输出

### 3. 阅读关键代码
- `web/src/composables/useScriptManager.ts` - 前端脚本管理
- `server/myapp/views/celery_views.py` - 后端脚本执行
- `server/myapp/models.py` - 数据模型

### 4. 理解数据流
```
用户点击 → 前端组件 → useScriptManager → API → Celery → subprocess → 脚本执行
```

## ❓ 常见问题

### Q1: 如何理解项目的核心价值？
A: 这是一个自动化测试平台，核心是让用户能够通过Web界面执行各种脚本，实现自动化测试和数据处理。

### Q2: 为什么要区分传统脚本和动态脚本？
A: 传统脚本简单直接，适合预配置的脚本；动态脚本功能丰富，适合需要参数验证的复杂脚本。

### Q3: 如何快速定位问题？
A: 先看日志，再分析数据流，最后检查代码逻辑。

### Q4: 如何添加新功能？
A: 先理解现有架构，再设计新功能，最后实现和测试。

## 📝 学习检查点

### 第1阶段检查点
- [ ] 能说出项目的核心功能
- [ ] 能列出主要技术栈
- [ ] 能理解项目结构

### 第2阶段检查点
- [ ] 能解释脚本执行流程
- [ ] 能理解前端脚本管理
- [ ] 能说出核心数据模型

### 第3阶段检查点
- [ ] 能理解Celery任务系统
- [ ] 能解释动态脚本系统
- [ ] 能理解页面创建机制

### 第4阶段检查点
- [ ] 能添加新脚本
- [ ] 能修改现有功能
- [ ] 能调试和排错

## 🎉 学习成果

完成本指南后，你将能够：
1. 独立开发和维护项目
2. 理解复杂的系统架构
3. 快速定位和解决问题
4. 为团队贡献代码

记住：学习是一个渐进的过程，不要急于求成。每学一个概念，都要确保理解透彻，再继续下一个。
